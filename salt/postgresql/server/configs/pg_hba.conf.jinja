{% set psf_internal = salt["pillar.get"]("psf_internal_network") %}
# PostgreSQL Client Authentication Configuration File
# ===================================================
#

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# Database administrative login by Unix domain socket
local   all             postgres                                peer

# Monitoring
hostssl all             diamond         127.0.0.1/32            md5

# Replication
hostssl replication       replicator       {{ psf_internal }}      md5

# Application Databases
hostssl monitoring        monitoring       0.0.0.0/0               md5
hostssl bugs-python       bugs-python      0.0.0.0/0               md5
hostssl pydotorg-prod     pydotorg-prod    0.0.0.0/0               md5
hostssl pydotorg-staging  pydotorg-staging 0.0.0.0/0               md5
hostssl pydotorg-staging2 pydotorg-staging 0.0.0.0/0               md5
hostssl pycon-prod        pycon-prod       0.0.0.0/0               md5
hostssl pycon-staging     pycon-staging    0.0.0.0/0               md5
hostssl speed-web         speed-web        0.0.0.0/0               md5
